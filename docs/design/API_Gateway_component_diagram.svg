<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .component-box { fill: #e1f5fe; stroke: #0277bd; stroke-width: 2; }
      .interface-circle { fill: #fff; stroke: #0277bd; stroke-width: 2; }
      .dependency-line { stroke: #666; stroke-width: 1.5; fill: none; stroke-dasharray: 5,5; }
      .solid-line { stroke: #0277bd; stroke-width: 2; fill: none; }
      .text-title { font-family: Arial; font-size: 12px; font-weight: bold; }
      .text-normal { font-family: Arial; font-size: 10px; }
      .text-small { font-family: Arial; font-size: 9px; fill: #666; }
    </style>
  </defs>
  
  <!-- API Gateway Container -->
  <rect x="50" y="50" width="1100" height="700" fill="#f8f9fa" stroke="#dee2e6" stroke-width="2" rx="10"/>
  <text x="600" y="35" text-anchor="middle" class="text-title" font-size="16px">API Gateway [Container: Python, FastAPI, Redis]</text>
  
  <!-- Authentication Component -->
  <rect x="80" y="100" width="200" height="120" class="component-box" rx="5"/>
  <circle cx="90" cy="110" r="8" class="interface-circle"/>
  <text x="105" y="115" class="text-title">Authentication Controller</text>
  <text x="90" y="135" class="text-small">- login()</text>
  <text x="90" y="150" class="text-small">- register()</text>
  <text x="90" y="165" class="text-small">- validateToken()</text>
  <text x="90" y="180" class="text-small">- refreshToken()</text>
  <text x="90" y="195" class="text-small">- socialAuth()</text>
  
  <!-- Task Management Component -->
  <rect x="320" y="100" width="200" height="120" class="component-box" rx="5"/>
  <circle cx="330" cy="110" r="8" class="interface-circle"/>
  <text x="345" y="115" class="text-title">Task Controller</text>
  <text x="330" y="135" class="text-small">- createTask()</text>
  <text x="330" y="150" class="text-small">- updateTask()</text>
  <text x="330" y="165" class="text-small">- completeTask()</text>
  <text x="330" y="180" class="text-small">- deleteTask()</text>
  <text x="330" y="195" class="text-small">- getTaskList()</text>
  
  <!-- User Profile Component -->
  <rect x="560" y="100" width="200" height="120" class="component-box" rx="5"/>
  <circle cx="570" cy="110" r="8" class="interface-circle"/>
  <text x="585" y="115" class="text-title">User Profile Controller</text>
  <text x="570" y="135" class="text-small">- getProfile()</text>
  <text x="570" y="150" class="text-small">- updateProfile()</text>
  <text x="570" y="165" class="text-small">- getStatistics()</text>
  <text x="570" y="180" class="text-small">- getFriends()</text>
  <text x="570" y="195" class="text-small">- getRanking()</text>
  
  <!-- Social Features Component -->
  <rect x="800" y="100" width="200" height="120" class="component-box" rx="5"/>
  <circle cx="810" cy="110" r="8" class="interface-circle"/>
  <text x="825" y="115" class="text-title">Social Controller</text>
  <text x="810" y="135" class="text-small">- addFriend()</text>
  <text x="810" y="150" class="text-small">- searchUsers()</text>
  <text x="810" y="165" class="text-small">- getLeaderboard()</text>
  <text x="810" y="180" class="text-small">- shareAchievement()</text>
  <text x="810" y="195" class="text-small">- getFriendActivity()</text>
  
  <!-- Middleware Layer -->
  <rect x="80" y="250" width="920" height="80" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5"/>
  <text x="540" y="270" text-anchor="middle" class="text-title">Middleware Layer</text>
  
  <rect x="100" y="285" width="120" height="35" class="component-box" rx="3"/>
  <text x="160" y="305" text-anchor="middle" class="text-small">JWT Validator</text>
  
  <rect x="240" y="285" width="120" height="35" class="component-box" rx="3"/>
  <text x="300" y="305" text-anchor="middle" class="text-small">Rate Limiter</text>
  
  <rect x="380" y="285" width="120" height="35" class="component-box" rx="3"/>
  <text x="440" y="305" text-anchor="middle" class="text-small">CORS Handler</text>
  
  <rect x="520" y="285" width="120" height="35" class="component-box" rx="3"/>
  <text x="580" y="305" text-anchor="middle" class="text-small">Request Logger</text>
  
  <rect x="660" y="285" width="120" height="35" class="component-box" rx="3"/>
  <text x="720" y="305" text-anchor="middle" class="text-small">Error Handler</text>
  
  <rect x="800" y="285" width="120" height="35" class="component-box" rx="3"/>
  <text x="860" y="305" text-anchor="middle" class="text-small">Cache Manager</text>
  
  <!-- Service Layer -->
  <rect x="80" y="360" width="920" height="100" fill="#e8f5e8" stroke="#2e7d32" stroke-width="2" rx="5"/>
  <text x="540" y="380" text-anchor="middle" class="text-title">Service Clients</text>
  
  <rect x="120" y="395" width="180" height="50" class="component-box" rx="3"/>
  <text x="210" y="415" text-anchor="middle" class="text-small">Gamification Service Client</text>
  <text x="210" y="430" text-anchor="middle" class="text-small">[HTTP/REST]</text>
  
  <rect x="320" y="395" width="180" height="50" class="component-box" rx="3"/>
  <text x="410" y="415" text-anchor="middle" class="text-small">Rewards Service Client</text>
  <text x="410" y="430" text-anchor="middle" class="text-small">[HTTP/REST]</text>
  
  <rect x="520" y="395" width="180" height="50" class="component-box" rx="3"/>
  <text x="610" y="415" text-anchor="middle" class="text-small">Calendar Service Client</text>
  <text x="610" y="430" text-anchor="middle" class="text-small">[HTTP/REST]</text>
  
  <rect x="720" y="395" width="180" height="50" class="component-box" rx="3"/>
  <text x="810" y="415" text-anchor="middle" class="text-small">Database Repository</text>
  <text x="810" y="430" text-anchor="middle" class="text-small">[SQL/TCP]</text>
  
  <!-- Configuration Component -->
  <rect x="80" y="490" width="200" height="80" class="component-box" rx="5"/>
  <text x="180" y="510" text-anchor="middle" class="text-title">Configuration Manager</text>
  <text x="90" y="530" class="text-small">- loadConfig()</text>
  <text x="90" y="545" class="text-small">- getApiKeys()</text>
  <text x="90" y="560" class="text-small">- getDatabaseConfig()</text>
  
  <!-- Notification Component -->
  <rect x="320" y="490" width="200" height="80" class="component-box" rx="5"/>
  <text x="420" y="510" text-anchor="middle" class="text-title">Notification Service</text>
  <text x="330" y="530" class="text-small">- sendPushNotification()</text>
  <text x="330" y="545" class="text-small">- sendEmail()</text>
  <text x="330" y="560" class="text-small">- scheduleReminder()</text>
  
  <!-- Validation Component -->
  <rect x="560" y="490" width="200" height="80" class="component-box" rx="5"/>
  <text x="660" y="510" text-anchor="middle" class="text-title">Request Validator</text>
  <text x="570" y="530" class="text-small">- validateTaskData()</text>
  <text x="570" y="545" class="text-small">- validateUserData()</text>
  <text x="570" y="560" class="text-small">- sanitizeInput()</text>
  
  <!-- Routing Component -->
  <rect x="800" y="490" width="200" height="80" class="component-box" rx="5"/>
  <text x="900" y="510" text-anchor="middle" class="text-title">API Router</text>
  <text x="810" y="530" class="text-small">- routeRequests()</text>
  <text x="810" y="545" class="text-small">- handleVersioning()</text>
  <text x="810" y="560" class="text-small">- loadBalancing()</text>
  
  <!-- External Systems -->
  <rect x="80" y="600" width="150" height="60" fill="#ffebee" stroke="#c62828" stroke-width="2" rx="5"/>
  <text x="155" y="620" text-anchor="middle" class="text-title">External Auth</text>
  <text x="155" y="635" text-anchor="middle" class="text-small">[Google/Facebook]</text>
  <text x="155" y="650" text-anchor="middle" class="text-small">[HTTPS/OAuth2]</text>
  
  <rect x="260" y="600" width="150" height="60" fill="#ffebee" stroke="#c62828" stroke-width="2" rx="5"/>
  <text x="335" y="620" text-anchor="middle" class="text-title">Push Service</text>
  <text x="335" y="635" text-anchor="middle" class="text-small">[Firebase/APNS]</text>
  <text x="335" y="650" text-anchor="middle" class="text-small">[HTTPS/REST]</text>
  
  <rect x="440" y="600" width="150" height="60" fill="#ffebee" stroke="#c62828" stroke-width="2" rx="5"/>
  <text x="515" y="620" text-anchor="middle" class="text-title">Email Service</text>
  <text x="515" y="635" text-anchor="middle" class="text-small">[SendGrid/SES]</text>
  <text x="515" y="650" text-anchor="middle" class="text-small">[HTTPS/REST]</text>
  
  <!-- Dependencies (dashed lines) -->
  <line x1="180" y1="220" x2="180" y2="250" class="dependency-line"/>
  <line x1="420" y1="220" x2="420" y2="250" class="dependency-line"/>
  <line x1="660" y1="220" x2="660" y2="250" class="dependency-line"/>
  <line x1="900" y1="220" x2="900" y2="250" class="dependency-line"/>
  
  <line x1="420" y1="330" x2="420" y2="360" class="dependency-line"/>
  <line x1="180" y1="460" x2="155" y2="600" class="dependency-line"/>
  <line x1="420" y1="570" x2="335" y2="600" class="dependency-line"/>
  <line x1="420" y1="570" x2="515" y2="600" class="dependency-line"/>
  
</svg>